<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <title th:text="${board.title} ?: 'TaskBoard'">TaskBoard</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 16px; }
    .container { display: flex; gap: 16px; }
    .month-grid { display: grid; grid-template-columns: repeat(7, 120px); grid-auto-rows: 100px; gap: 6px; width: calc(7 * 120px + 6 * 6px); }
    .day-cell { border: 1px solid #ccc; padding: 6px; background: #fafafa; display: flex; flex-direction: column; gap: 6px; overflow: hidden; }
    .day-cell.empty { background:#f5f5f5; }
    .day-header { font-weight: bold; font-size: 0.9em; display:flex; justify-content:space-between; }
    .tasks { flex: 1; overflow-y: auto; font-size:0.9em; }
    .task { background: #fff; padding:4px; margin-bottom:4px; border-radius:4px; border:1px solid #eee; }
    .week-column { width: 320px; }
    .week-day { border: 1px solid #ddd; padding: 8px; margin-bottom: 8px; background: #fff; min-height: 80px; }
    .controls { margin-bottom: 12px; }
    .small { font-size: 0.85em; color:#666; }
    button { cursor: pointer; }
    .add-form { display:flex; gap:6px; margin-top:6px; }
    .add-form input[type="text"]{ flex:1; }
    .add-form .member-select { width:110px; }
  </style>
</head>
<body>

<h1 id="boardTitle" th:text="${board.title} + ' ' + ${board.year} + '-' + ${board.month}">Август 2025</h1>

<div class="controls">
  <button id="prevMonth">Prev</button>
  <button id="nextMonth">Next</button>
  <span class="small" id="currentMonthLabel"></span>
</div>

<div class="container">
  <div>
    <div class="month-grid" id="monthGrid"></div>
  </div>

  <div class="week-column">
    <h3>Текущая неделя</h3>
    <div id="weekContainer"></div>
  </div>
</div>

<!-- передаём данные доски в JS -->
<script th:inline="javascript">
  /*<![CDATA[*/
  const BOARD_ID = [[${board.id}]];
  let YEAR      = [[${board.year}]];
  let MONTH     = [[${board.month}]]; // 1..12
  /*]]>*/
</script>

<!-- подключаем внешний JS (в resources/static/js/board.js) -->
<script th:src="@{/js/board.js}"></script>

</body>
</html>
